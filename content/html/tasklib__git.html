<!DOCTYPE html><html>
    <head>
        <title>Rosalia Docs - Git Tasks</title>
                    <link href='../styles/bootstrap.min.css' rel='stylesheet' />
                    <link href='../styles/doc.css' rel='stylesheet' />
                    <link href='../styles/vs.css' rel='stylesheet' />
            </head>
    <body>
        <div id='page'>
            <header class='navbar navbar-inverse navbar-fixed-top'>
                <div class='container'>
                    <a id='mainLogo' href='/index.html'>
                        <span>Rosalia</span><span class='docs'>Docs</span>
                    </a>
                </div>
            </header>

            <div class='container'>
                <section>
                    <nav id='tableOfContents' class='affix'>
                        <ul>
<li>
<a href='/content/html/intro.html'>Introduction</a>
</li>
<li>
<a href='/content/html/tasklib.html'>Task Lib</a>
<ul>
<li>
<a href='/content/html/tasklib__assemblyinfo.html'>Assembly Info</a>
</li>
<li>
<span>Git Tasks</span>
</li>
<li>
<a href='/content/html/tasklib__nuget.html'>NuGet Tasks</a>
</li>
</ul>
</li>
</ul>

                    </nav>
                </section>
                <section id='mainContent'>
                    <h1>Git Tasks</h1>

<p>Git tasks call <code>git.exe</code> tool with specified arguments.</p>

<p>Threre are a few ways to configure a path to git executable:</p>

<ol>
<li>explicitly specify a path: <code>ToolPath = "C:\Git\bin"</code>;</li>
<li>include git bin directory to <code>PATH</code> environment variable;</li>
<li>specify GIT_HOME environment variable with a path to your git installation directory.</li>
<li>if your git is installed in <code>Program Files\Git</code> or <code>Program Files (x86)</code> it will be found automatically.</li>
</ol>

<div class='alert'>
    <code>GIT_HOME</code> could point to <code>GIT_INSTALL_DIRECTORY</code> or to <code>GIT_INSTALL_DIRECTORY\bin</code> and it should not include <code>git.exe</code> part.
</div>

<h2>GetVersion</h2>

<hr />

<p>Extracts version info from a git repository using a command:</p>

<pre><code>git describe --tags
</code></pre>

<p>It is required for this task that a tag was created earlier. Use this command to create a tag:</p>

<pre><code>git tag -a [VERSION] -m "[TAG MESSAGE]"
</code></pre>

<p>Make sure you pushed your tag so it could be visible globally:</p>

<pre><code>git push --tags to share tags
</code></pre>

<h3>Input</h3>

<ul>
<li>path to git executable (optional);</li>
<li>working directory (optional). Current directory is used if no working directory provided.</li>
</ul>

<h3>Output</h3>

<p>An instance of <code>GetVersionOutput</code> class.</p>

<table class="table table-bordered">
    <tr>
        <td class="property">Tag</td>
        <td class="type">string</td>
        <td>Tag text.</td>
    </tr>
    <tr>
        <td class="property">CommitsCount</td>
        <td class="type">int</td>
        <td>Count of commits since the tag was added.</td>
    </tr>
    <tr>
        <td class="property">LastCommitKey</td>
        <td class="type">string</td>
        <td>Abbreviated object name of the most recent commit.</td>
    </tr>
</table>

<h2>GitCommandTask</h2>

<hr />

<p>Calls <code>git.exe</code> with specified arguments.</p>

<h3>Input</h3>

<ul>
<li>path to git executable (optional);</li>
<li>working directory (optional). Current directory is used if no working directory provided.</li>
</ul>

<h3>Example</h3>

<pre><code>//// Do auto commit to gh-pages repo
new GitCommandTask&lt;BuildRosaliaContext&gt;
{
    InputProvider = context =&gt; new GitInput
    {
        RawCommand = string.Format("commit -a -m \"Docs auto commit v{0}\"", context.Data.Version),
        WorkDirectory = new DefaultDirectory(context.Data.PrivateData.GhPagesRoot)
    }
}
</code></pre>

                </section>
            </div>
        </div>
        <footer></footer>
    </body>

            <script type='text/javascript' src='../scripts/bootstrap.min.js'></script>
            <script type='text/javascript' src='../scripts/highlight.pack.js'></script>
        <script>hljs.initHighlightingOnLoad();</script>
</html>